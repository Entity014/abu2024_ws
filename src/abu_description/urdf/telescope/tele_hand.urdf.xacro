<?xml version="1.0"?>
<robot xmlns:xacro="http://ros.org/wiki/xacro">
    <xacro:macro name="tele_hand" params="side length width height pos_x pos_y pos_z mass">
        <link name="${side}_tele_hand_link">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <xacro:if value="${side == 'right'}">
                    <mesh filename="file://$(find abu_description)/urdf/model/tele_hand_right.dae" scale="1 1 1"/>
                </xacro:if>
                <xacro:if value="${side == 'left'}">
                    <mesh filename="file://$(find abu_description)/urdf/model/tele_hand_left.dae" scale="1 1 1"/>
                </xacro:if>
            </geometry>
            <material name="gray">
                <color rgba="0.123 0.114 0.119 0.8"/>
            </material>
        </visual>
        <collision>
            <origin xyz="0.145 0 0" rpy="0 0 0"/>
            <geometry>
                <xacro:if value="${side == 'right'}">
                    <mesh filename="file://$(find abu_description)/urdf/model/tele_hand_right.dae" scale="1 1 1"/>
                </xacro:if>
                <xacro:if value="${side == 'left'}">
                    <mesh filename="file://$(find abu_description)/urdf/model/tele_hand_left.dae" scale="1 1 1"/>
                </xacro:if>
            </geometry>
        </collision>

        <inertial>
            <xacro:if value="${side == 'right'}">
                <origin xyz="0.09 -0.09 -0.06" rpy="0 0 0"/>
            </xacro:if>
            <xacro:if value="${side == 'left'}">
                <origin xyz="0.09 0.09 -0.06" rpy="0 0 0"/>
            </xacro:if>
            <mass value="${mass}"/>
            <inertia ixx="${(1/12) * mass * ((width  * width)  + (height * height))}" ixy="0.0" ixz="0.0"
                    iyy="${(1/12) * mass * ((length * length) + (height * height))}" iyz="0.0"
                    izz="${(1/12) * mass * ((length * length) + (width  * width))}"/>
        </inertial>
        </link>

        <gazebo reference="${side}_tele_hand_link">  
        <visual>  
            <material>
            <ambient>0.123 0.114 0.119 0.8</ambient>  
            <diffuse>0.123 0.114 0.119 0.8</diffuse>  
            <specular>0.123 0.114 0.119 0.8</specular>  
            <emissive>0.0 0.0 0.0 0.0</emissive>  
            </material>
        </visual>  
        </gazebo>
        <xacro:if value="${side == 'right'}">
            <joint name="${side}_tele_hand_joint" type="revolute">
                <axis xyz="0 0 1" />
                <parent link="silder_wrist_link"/>
                <child link="${side}_tele_hand_link"/>
                <origin xyz="${pos_x} ${pos_y} ${pos_z}" rpy="0 0 0"/>
                <limit lower="0" upper="${pi/4}" effort="-1" velocity="-1"/>
            </joint>
        </xacro:if>
        <xacro:if value="${side == 'left'}">
            <joint name="${side}_tele_hand_joint" type="revolute">
                <axis xyz="0 0 -1" />
                <parent link="silder_wrist_link"/>
                <child link="${side}_tele_hand_link"/>
                <origin xyz="${pos_x} ${pos_y} ${pos_z}" rpy="0 0 0"/>
                <limit lower="0" upper="${pi/4}" effort="-1" velocity="-1"/>
            </joint>
        </xacro:if>
    </xacro:macro>
</robot>